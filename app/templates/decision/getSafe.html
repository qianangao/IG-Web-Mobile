{%extends "base.html"%}
{% block app_content%}
<table class="table table-striped table-bordered table-responsive table-hover" id="myDiv">
  <caption>安全分布</caption>
  <thead>
    <tr class="info">
      <th>地区</th>
      <th>今日安全天数</th>
      <th>昨日安全天数</th>
      <th>今日安全指数</th>
      <th>昨日安全指数</th>
    </tr>
  </thead>
  <tbody>
    {%for data in datas%}
    <tr>
      <td>{{data.parkName}}</td>
      <td>{{data.safeDay}}</td>
      <td>{{data.safeDayZt}}</td>
      <td>{{data.safeIndex}}</td>
      <td>{{data.safeIndexZt}}</td>
    </tr>
    {%endfor%}
  </tbody>
</table>
<!-- <canvas id="myChartOne" style="width: 600px;"></canvas> -->
{%endblock%}
{%block scripts%}
{{super()}}
 <script> 
      var obj=$('#myDiv');
    var X,Y;
    obj.on("touchstart", function(e) {
　　　　e.preventDefault();// 使用event.preventDefault()可以取消默认事件
　　　　startX = e.originalEvent.changedTouches[0].pageX,
　　　　startY = e.originalEvent.changedTouches[0].pageY;
       time=+new Date;//正號(+)是強制轉換為數字的語法
       isScrolling=0;
　　});
    obj.on("touchmove", function(e) {
          if(e.originalEvent.changedTouches.length > 1 || e.originalEvent.scale && e.originalEvent.scale !== 1)return;
    　　　　moveEndX = e.originalEvent.changedTouches[0].pageX,
    　　　　moveEndY = e.originalEvent.changedTouches[0].pageY,
    　　　　X = moveEndX - startX,
    　　　　Y = moveEndY - startY;
           isScrolling=Math.abs(X)<Math.abs(Y)?1:0;
           if(isScrolling===0){
              e.preventDefault();
           }
           // else{
           //      window.location.href="getSafe";
           // }
    　　});
    obj.on("touchend",function(e){
      var duration = +new Date -time; //滑动的持续时间
      if(isScrolling===0){
        if(Number(duration)>10){
          if(X>10){
            window.location.href="getDuty";
          }else if(X<-10){
            window.location.href="getCampus";
          }
          else{
            window.location.href="getSafe";
          }
        }
      }
    })
// var parkName={{parkName|safe}};
// var safeDay={{safeDay|safe}};
// var safeDayZt={{safeDayZt|safe}};
// var safeIndex={{safeIndex|safe}};
// var safeIndexZt={{safeIndexZt|safe}};
// var ctx = $("#myChartOne");
// var chart=new Chart(ctx,{
//     type:'bar',
//     data:{
//         labels: ['安全天數', '安全指數'],
//         datasets: [{
//             data: safeDay,
//             backgroundColor: 'rgb(0, 206, 209)',
//             borderColor: 'rgb(0, 206, 209)',
//         },
//         {

//             data: safeDayZt,
//             backgroundColor: 'rgb(0, 206, 209)',
//             borderColor: 'rgb(0, 206, 209)',
//         },{
//             data: safeIndex,
//             backgroundColor: 'rgb(0, 206, 209)',
//             borderColor: 'rgb(0, 206, 209)',
//         },{
//             data: safeIndexZt,
//             backgroundColor: 'rgb(0, 206, 209)',
//             borderColor: 'rgb(0, 206, 209)',
//         }
//         ] 
//     },
//      options: {
//         legend: {
//           display: true,
//           position: 'top',
//           labels: {
//             fontColor: 'rgb(0, 206, 209)'
//           }
//         },
//          tooltips: {
//           cornerRadius: 0,
//           caretSize: 0,
//           xPadding: 16,
//           yPadding: 10,
//           backgroundColor: 'rgba(0, 150, 100, 0.9)',
//           titleFontStyle: 'normal',
//           titleMarginBottom: 15
//         }
//     }
// })

</script>
{%endblock%}